<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-105K33MZV4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-105K33MZV4');
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚³ã‚³ãƒ•ã‚©ãƒªã‚¢ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
  max-width: 800px;
  margin: auto;
}
.container {
  border: 1px solid #ddd;
  padding: 20px;
  border-radius: 5px;
}
.description-toggle {
  cursor: pointer;
  color: #007bff;
  text-decoration: underline;
}
.description-content {
  display: none;
  margin-top: 10px;
  padding: 10px;
  background-color: #f8f9fa;
  border-radius: 5px;
}
.tabs {
  margin-top: 20px;
}
.tab-buttons {
  display: flex;
  gap: 5px;
  margin-bottom: 10px;
}
.tab-button {
  padding: 8px 16px;
  border: 1px solid #ddd;
  border-bottom: none;
  border-radius: 4px 4px 0 0;
  background: #f8f9fa;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  color: #333;
}
.tab-button.active {
  background: white;
  border-bottom: 2px solid #007bff;
  font-weight: bold;
  color: black;
}
.tab-icon {
  font-size: 1.2em;
}
.tab-content {
  border: 1px solid #ddd;
  padding: 20px;
  border-radius: 0 4px 4px 4px;
}
.text-areas {
  display: flex;
  justify-content: space-between;
  gap: 20px;
}
.text-area {
  width: 48%;
}
textarea {
  width: 100%;
  height: 200px;
  margin-bottom: 10px;
  font-family: monospace;
}
.file-import {
  margin-bottom: 20px;
}
.file-list {
  margin: 10px 0;
  max-height: 200px;
  overflow-y: auto;
}
.file-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px;
  border: 1px solid #ddd;
  margin-bottom: 5px;
  border-radius: 3px;
}
.file-item-name {
  flex-grow: 1;
}
.file-item button {
  margin-left: 10px;
}
#outputText {
  background-color: #f5f5f5;
}
button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
  margin-right: 5px;
}
#clearButton {
  background-color: #dc3545;
}
#message {
  margin-top: 10px;
  color: green;
}
.options {
  margin-top: 20px;
}
.checkbox-group {
  margin-bottom: 10px;
}
.rule-section {
  margin-bottom: 20px;
}
.rule-form {
  display: flex;
  margin-bottom: 10px;
}
.rule-form input {
  margin-right: 5px;
}
.rule-list {
  margin-top: 10px;
}
.rule-item {
  display: flex;
  align-items: center;
  margin-bottom: 5px;
  background-color: #f8f9fa;
  padding: 5px;
  border-radius: 3px;
  cursor: move;
}
.rule-item input, .rule-item select {
  margin-right: 5px;
}
.delete-btn, .move-btn {
  margin-left: 5px;
  cursor: pointer;
  user-select: none;
}
.move-btn {
  font-size: 18px;
}
.arrow {
  margin: 0 5px;
  font-weight: bold;
}
.footer {
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #ddd;
}
.update-history, .author-info {
  margin-bottom: 15px;
}
.update-history summary, .author-info summary {
  cursor: pointer;
  color: #007bff;
}
.import-export {
  margin-top: 20px;
  padding: 10px;
  background-color: #f8f9fa;
  border-radius: 5px;
}
.line-break-settings {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}
.line-break-settings label {
  margin-right: 10px;
}
.line-break-settings input[type="number"] {
  width: 50px;
}
.dragging {
  opacity: 0.5;
}
</style>
</head>
<body>
<div class="container">
  <h1>ã‚³ã‚³ãƒ•ã‚©ãƒªã‚¢ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼</h1>
  <div class="description-toggle" onclick="toggleDescription()">èª¬æ˜ã‚’è¡¨ç¤º/éè¡¨ç¤º</div>
  <div id="description" class="description-content">
    <p>ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€ã‚³ã‚³ãƒ•ã‚©ãƒªã‚¢ã§ä½¿ç”¨ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’åŠ¹ç‡çš„ã«æ•´å½¢ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ã‚³ãƒ•ã‚©ãƒªã‚¢ã§ä½¿ã„ã‚„ã™ã„å½¢å¼ã«å¤‰æ›ã—ã¾ã™ã€‚ä¸»ãªæ©Ÿèƒ½ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p>
    <ul>
      <li>ç©ºç™½ã¨æ”¹è¡Œã®å‰Šé™¤ï¼šãƒ†ã‚­ã‚¹ãƒˆã‚’è©°ã‚ã¦è¡¨ç¤ºã—ã¾ã™ã€‚è¡Œé ­ã®ç©ºç™½ã‚„ç©ºã®è¡Œã‚‚å‰Šé™¤ã—ã¾ã™ã€‚</li>
      <li>æŒ‡å®šæ–‡å­—ã§ã®æ”¹è¡Œï¼šã€Œã€ã€ã€Œã€‚ã€ã€Œã€ã€ãªã©ã§è‡ªå‹•çš„ã«æ”¹è¡Œã‚’å…¥ã‚Œã¾ã™ã€‚</li>
      <li>ã‚«ã‚¹ã‚¿ãƒ æ”¹è¡Œãƒ«ãƒ¼ãƒ«ï¼šä»»æ„ã®æ–‡å­—ã§æ”¹è¡Œã‚’å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚</li>
      <li>æ–‡å­—åˆ—ã®ç½®æ›ï¼šç‰¹å®šã®æ–‡å­—åˆ—ã‚’åˆ¥ã®æ–‡å­—åˆ—ã«ç½®ãæ›ãˆã¾ã™ã€‚é‡è¤‡ã™ã‚‹ç½®æ›ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚æ­£ã—ãå‡¦ç†ã—ã¾ã™ã€‚</li>
      <li>ä¸è¦ãªæ–‡å­—åˆ—ã®å‰Šé™¤ï¼šãƒ˜ãƒƒãƒ€ãƒ¼ã‚„ãƒ•ãƒƒã‚¿ãƒ¼ãªã©ã€ä¸è¦ãªéƒ¨åˆ†ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</li>
      <li>ç‰¹å®šã®è¨˜å·é–“ã®ç¯„å›²ã‚’å‰Šé™¤ï¼šæŒ‡å®šã—ãŸé–‹å§‹è¨˜å·ã¨çµ‚äº†è¨˜å·ã®é–“ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã€‚</li>
      <li>è‹±èªã®æ–‡å­—ã€ã‚«ãƒ³ãƒã€ãƒ”ãƒªã‚ªãƒ‰ã®å‰å¾Œã®ã‚¹ãƒšãƒ¼ã‚¹ã¯ä¿æŒã•ã‚Œã¾ã™ã€‚</li>
      <li>ãƒ«ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼šè¨­å®šã—ãŸãƒ«ãƒ¼ãƒ«ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã€å¾Œã§èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</li>
      <li>æ”¹è¡Œã®è¡Œæ•°ã‚’è¨­å®šï¼šå„æ”¹è¡Œãƒ«ãƒ¼ãƒ«ã«å¯¾ã—ã¦ã€æŒ¿å…¥ã™ã‚‹æ”¹è¡Œã®æ•°ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</li>
      <li>ãƒ«ãƒ¼ãƒ«ã®é †åºå¤‰æ›´ï¼šå„ãƒ«ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—å†…ã§ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯â–²â–¼ãƒœã‚¿ãƒ³ã«ã‚ˆã‚Šãƒ«ãƒ¼ãƒ«ã®é †åºã‚’å¤‰æ›´ã§ãã¾ã™ã€‚</li>
    </ul>
    <p>ä½¿ã„æ–¹ï¼šå¤‰æ›ã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã€å¿…è¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚å¤‰æ›ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡Œã‚ã‚Œã¾ã™ã€‚ãƒ«ãƒ¼ãƒ«ã®é †åºã¯ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯â–²â–¼ãƒœã‚¿ãƒ³ã§å¤‰æ›´ã§ãã¾ã™ã€‚</p>
  </div>
  <div class="tabs">
    <div class="tab-buttons">
      <button class="tab-button active" onclick="switchTab('single')"><span class="tab-icon">âœï¸</span>ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿</button>
      <button class="tab-button" onclick="switchTab('batch')"><span class="tab-icon">ğŸ“</span>ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›</button>
    </div>
    <div class="tab-content">
      <div id="single-tab">
        <div class="text-areas">
          <div class="text-area">
            <h2>å¤‰æ›å‰</h2>
            <textarea id="inputText"></textarea>
          </div>
          <div class="text-area">
            <h2>å¤‰æ›å¾Œ</h2>
            <textarea id="outputText" readonly></textarea>
          </div>
        </div>
        <div>
          <button onclick="copyAll()">å…¨ã¦ã‚³ãƒ”ãƒ¼</button>
          <button onclick="clearText()" id="clearButton">ã‚¯ãƒªã‚¢</button>
        </div>
      </div>
      <div id="batch-tab" style="display: none;">
        <div class="file-import">
          <input type="file" id="batchFiles" accept=".txt" multiple style="display: none;">
          <button onclick="document.getElementById('batchFiles').click()">ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</button>
          <button onclick="convertAllFiles()">ä¸€æ‹¬å¤‰æ›</button>
          <button onclick="downloadAll()">å…¨ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
        </div>
        <div id="fileList" class="file-list">
        </div>
      </div>
    </div>
  </div>
  <div id="message"></div>
  <div class="options">
    <div class="checkbox-group">
      <label><input type="checkbox" id="removeSpaces" checked>ç©ºç™½ã¨æ”¹è¡Œã‚’å‰Šé™¤</label>
      <label><input type="checkbox" id="removeAlphabetSpaces">ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚‚å‰Šé™¤ã™ã‚‹</label>
    </div>
    <div class="line-break-settings">
      <label><input type="checkbox" id="breakAtComma">ã€ã§æ”¹è¡Œ</label>
      <label>è¡Œæ•°: <input type="number" id="breakAtCommaLines" value="0" min="0"></label>
    </div>
    <div class="line-break-settings">
      <label><input type="checkbox" id="breakAtPeriod">ã€‚ã§æ”¹è¡Œ</label>
      <label>è¡Œæ•°: <input type="number" id="breakAtPeriodLines" value="0" min="0"></label>
    </div>
    <div class="line-break-settings">
      <label><input type="checkbox" id="breakAtQuote">ã€ã§æ”¹è¡Œ</label>
      <label>è¡Œæ•°: <input type="number" id="breakAtQuoteLines" value="0" min="0"></label>
    </div>
    <div class="rule-section">
      <h3>æ”¹è¡Œãƒ«ãƒ¼ãƒ«</h3>
      <div class="rule-form">
        <input type="text" id="breakRuleInput" placeholder="æ”¹è¡Œã™ã‚‹æ–‡å­—">
        <select id="breakRulePosition">
          <option value="after">å¾Œ</option>
          <option value="before">å‰</option>
        </select>
        <input type="number" id="breakRuleLines" value="0" min="0" placeholder="è¡Œæ•°">
        <button onclick="addRule('break')">è¿½åŠ </button>
      </div>
      <div id="breakRules" class="rule-list"></div>
    </div>
    <div class="rule-section">
      <h3>ç½®æ›ãƒ«ãƒ¼ãƒ«</h3>
      <div class="rule-form">
        <input type="text" id="replaceFrom" placeholder="ç½®æ›å‰">
        <input type="text" id="replaceTo" placeholder="ç½®æ›å¾Œ">
        <button onclick="addRule('replace')">è¿½åŠ </button>
      </div>
      <div id="replaceRules" class="rule-list"></div>
    </div>
    <div class="rule-section">
      <h3>å‰Šé™¤ãƒ«ãƒ¼ãƒ«</h3>
      <div class="rule-form">
        <input type="text" id="deleteRuleInput" placeholder="å‰Šé™¤ã™ã‚‹æ–‡å­—åˆ—">
        <button onclick="addRule('delete')">è¿½åŠ </button>
      </div>
      <div id="deleteRules" class="rule-list"></div>
    </div>
    <div class="rule-section">
      <h3>ç¯„å›²å‰Šé™¤ãƒ«ãƒ¼ãƒ«</h3>
      <div class="rule-form">
        <input type="text" id="rangeDeleteStart" placeholder="é–‹å§‹è¨˜å·">
        <input type="text" id="rangeDeleteEnd" placeholder="çµ‚äº†è¨˜å·">
        <button onclick="addRule('rangeDelete')">è¿½åŠ </button>
      </div>
      <div id="rangeDeleteRules" class="rule-list"></div>
    </div>
  </div>
  <div class="import-export">
    <h3>ãƒ«ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h3>
    <button onclick="exportRules()">ãƒ«ãƒ¼ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
    <input type="file" id="importFile" accept=".json" style="display: none;">
    <button onclick="document.getElementById('importFile').click()">ãƒ«ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
  </div>
  <div class="footer">
    <details class="update-history">
      <summary>æ›´æ–°å±¥æ­´</summary>
      <ul>
        <li>2025/01/18 ã‚¿ãƒ–UIã®è¿½åŠ ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿/ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›ï¼‰ã€è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€æ‹¬å¤‰æ›æ©Ÿèƒ½ã€è¨­å®šã®è‡ªå‹•ä¿å­˜æ©Ÿèƒ½ã‚’è¿½åŠ </li>
        <li>2024/10/16 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¤‰æ›ã€ã‚¹ãƒšãƒ¼ã‚¹å‡¦ç†ã®æ”¹å–„ã€ç¯„å›²å‰Šé™¤æ©Ÿèƒ½ã€ãƒ«ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’è¿½åŠ ã€‚æ”¹è¡Œã®è¡Œæ•°è¨­å®šã€ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¨â–²â–¼ãƒœã‚¿ãƒ³ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ«ã®é †åºå¤‰æ›´æ©Ÿèƒ½ã€ç½®æ›ãƒ«ãƒ¼ãƒ«ã®å‡¦ç†æ”¹å–„å®Ÿè£…</li>
        <li>2024/9/13 ãƒ†ã‚­ã‚¹ãƒˆã‚¯ãƒªã‚¢æ©Ÿèƒ½è¿½åŠ </li>
        <li>2024/9/11 å…¬é–‹</li>
      </ul>
    </details>
    <details class="author-info">
      <summary>ä½œè€…æƒ…å ±</summary>
      <p>ä½œè€…ï¼šã—ã‚‹ã¹(<a href="https://x.com/qxoiUioxp" target="_blank" rel="noopener noreferrer">https://x.com/qxoiUioxp</a>)</p>
    </details>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
// ãƒ«ãƒ¼ãƒ«ã‚’ä¿å­˜ã™ã‚‹é…åˆ—
let breakRules = [];
let replaceRules = [];
let deleteRules = [];
let rangeDeleteRules = [];

// LocalStorageã«è¨­å®šã‚’ä¿å­˜ã™ã‚‹é–¢æ•°
function saveSettings() {
  const settings = {
    breakRules,
    replaceRules,
    deleteRules,
    rangeDeleteRules,
    checkboxStates: {
      removeSpaces: document.getElementById('removeSpaces').checked,
      breakAtComma: document.getElementById('breakAtComma').checked,
      breakAtPeriod: document.getElementById('breakAtPeriod').checked,
      breakAtQuote: document.getElementById('breakAtQuote').checked,
      removeAlphabetSpaces: document.getElementById('removeAlphabetSpaces').checked
    },
    lineBreakSettings: {
      breakAtCommaLines: parseInt(document.getElementById('breakAtCommaLines').value) || 0,
      breakAtPeriodLines: parseInt(document.getElementById('breakAtPeriodLines').value) || 0,
      breakAtQuoteLines: parseInt(document.getElementById('breakAtQuoteLines').value) || 0
    }
  };
  localStorage.setItem('textConverterSettings', JSON.stringify(settings));
}

// LocalStorageã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã‚€é–¢æ•°
function loadSettings() {
  const savedSettings = localStorage.getItem('textConverterSettings');
  if (savedSettings) {
    try {
      const settings = JSON.parse(savedSettings);
      
      // ãƒ«ãƒ¼ãƒ«ã®å¾©å…ƒ
      breakRules = settings.breakRules || [];
      replaceRules = settings.replaceRules || [];
      deleteRules = settings.deleteRules || [];
      rangeDeleteRules = settings.rangeDeleteRules || [];

      // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’å¾©å…ƒ
      if (settings.checkboxStates) {
        document.getElementById('removeSpaces').checked = settings.checkboxStates.removeSpaces;
        document.getElementById('breakAtComma').checked = settings.checkboxStates.breakAtComma;
        document.getElementById('breakAtPeriod').checked = settings.checkboxStates.breakAtPeriod;
        document.getElementById('breakAtQuote').checked = settings.checkboxStates.breakAtQuote;
        document.getElementById('removeAlphabetSpaces').checked = settings.checkboxStates.removeAlphabetSpaces;
      }

      // æ”¹è¡Œè¨­å®šã®å¾©å…ƒ
      if (settings.lineBreakSettings) {
        document.getElementById('breakAtCommaLines').value = settings.lineBreakSettings.breakAtCommaLines;
        document.getElementById('breakAtPeriodLines').value = settings.lineBreakSettings.breakAtPeriodLines;
        document.getElementById('breakAtQuoteLines').value = settings.lineBreakSettings.breakAtQuoteLines;
      }

      // ãƒ«ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã®æ›´æ–°
      updateRuleList('break', 'breakRules');
      updateRuleList('replace', 'replaceRules');
      updateRuleList('delete', 'deleteRules');
      updateRuleList('rangeDelete', 'rangeDeleteRules');
    } catch (error) {
      console.error('è¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
    }
  }
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è¨­å®šã‚’å¾©å…ƒ
document.addEventListener('DOMContentLoaded', loadSettings);

// èª¬æ˜ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
function toggleDescription() {
  const description = document.getElementById("description");
  description.style.display = description.style.display === "none" ? "block" : "none";
}

// ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹é–¢æ•°
function addRule(type) {
  let value, position, from, to, start, end, lines;
  let listId;

  switch (type) {
    case 'break':
      value = document.getElementById('breakRuleInput').value;
      position = document.getElementById('breakRulePosition').value;
      lines = parseInt(document.getElementById('breakRuleLines').value) || 0;
      if (value) {
        breakRules.push({ char: value, position: position, lines: lines });
      }
      listId = 'breakRules';
      break;
    case 'replace':
      from = document.getElementById('replaceFrom').value;
      to = document.getElementById('replaceTo').value;
      if (from && to) {
        replaceRules.push({ from: from, to: to });
      }
      listId = 'replaceRules';
      break;
    case 'delete':
      value = document.getElementById('deleteRuleInput').value;
      if (value) {
        deleteRules.push(value);
      }
      listId = 'deleteRules';
      break;
    case 'rangeDelete':
      start = document.getElementById('rangeDeleteStart').value;
      end = document.getElementById('rangeDeleteEnd').value;
      if (start && end) {
        rangeDeleteRules.push({ start: start, end: end });
      }
      listId = 'rangeDeleteRules';
      break;
  }

  updateRuleList(type, listId);
  convertText();
  saveSettings();
}

// ãƒ«ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
function updateRuleList(type, listId) {
  const list = document.getElementById(listId);
  let html = '';

  switch (type) {
    case 'break':
      html = breakRules.map((rule, index) => `
        <div class="rule-item" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)" data-index="${index}">
          <input type="text" value="${rule.char}" onchange="updateRule('break', ${index}, 'char', this.value)">
          <select onchange="updateRule('break', ${index}, 'position', this.value)">
            <option value="after" ${rule.position === 'after' ? 'selected' : ''}>å¾Œ</option>
            <option value="before" ${rule.position === 'before' ? 'selected' : ''}>å‰</option>
          </select>
          <input type="number" value="${rule.lines}" min="0" onchange="updateRule('break', ${index}, 'lines', this.value)">
          <button class="delete-btn" onclick="removeRule('break', ${index})">å‰Šé™¤</button>
          <span class="move-btn" onclick="moveRule('break', ${index}, -1)">â–²</span>
          <span class="move-btn" onclick="moveRule('break', ${index}, 1)">â–¼</span>
        </div>
      `).join('');
      break;
    case 'replace':
      html = replaceRules.map((rule, index) => `
        <div class="rule-item" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)" data-index="${index}">
          <input type="text" value="${rule.from}" onchange="updateRule('replace', ${index}, 'from', this.value)">
          <span class="arrow">â†’</span>
          <input type="text" value="${rule.to}" onchange="updateRule('replace', ${index}, 'to', this.value)">
          <button class="delete-btn" onclick="removeRule('replace', ${index})">å‰Šé™¤</button>
          <span class="move-btn" onclick="moveRule('replace', ${index}, -1)">â–²</span>
          <span class="move-btn" onclick="moveRule('replace', ${index}, 1)">â–¼</span>
        </div>
      `).join('');
      break;
    case 'delete':
      html = deleteRules.map((rule, index) => `
        <div class="rule-item" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)" data-index="${index}">
          <input type="text" value="${rule}" onchange="updateRule('delete', ${index}, 'value', this.value)">
          <button class="delete-btn" onclick="removeRule('delete', ${index})">å‰Šé™¤</button>
          <span class="move-btn" onclick="moveRule('delete', ${index}, -1)">â–²</span>
          <span class="move-btn" onclick="moveRule('delete', ${index}, 1)">â–¼</span>
        </div>
      `).join('');
      break;
    case 'rangeDelete':
      html = rangeDeleteRules.map((rule, index) => `
        <div class="rule-item" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)" data-index="${index}">
          <input type="text" value="${rule.start}" onchange="updateRule('rangeDelete', ${index}, 'start', this.value)">
          <span class="arrow">ï½</span>
          <input type="text" value="${rule.end}" onchange="updateRule('rangeDelete', ${index}, 'end', this.value)">
          <button class="delete-btn" onclick="removeRule('rangeDelete', ${index})">å‰Šé™¤</button>
          <span class="move-btn" onclick="moveRule('rangeDelete', ${index}, -1)">â–²</span>
          <span class="move-btn" onclick="moveRule('rangeDelete', ${index}, 1)">â–¼</span>
        </div>
      `).join('');
      break;
  }

  list.innerHTML = html;
}

// ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹æ™‚ã®å‡¦ç†
function drag(event) {
  event.dataTransfer.setData("text", event.target.dataset.index);
  event.target.classList.add('dragging');
}

// ãƒ‰ãƒ­ãƒƒãƒ—å¯èƒ½ãªå ´æ‰€ã®è¨­å®š
function allowDrop(event) {
  event.preventDefault();
}

// ãƒ‰ãƒ­ãƒƒãƒ—æ™‚ã®å‡¦ç†
function drop(event) {
  event.preventDefault();
  const fromIndex = parseInt(event.dataTransfer.getData("text"));
  const toIndex = parseInt(event.target.closest('.rule-item').dataset.index);
  const type = event.target.closest('.rule-list').id.replace('Rules', '');
  
  if (fromIndex !== toIndex) {
    let rules;
    switch (type) {
      case 'break':
        rules = breakRules;
        break;
      case 'replace':
        rules = replaceRules;
        break;
      case 'delete':
        rules = deleteRules;
        break;
      case 'rangeDelete':
        rules = rangeDeleteRules;
        break;
    }
    
    const [removed] = rules.splice(fromIndex, 1);
    rules.splice(toIndex, 0, removed);
    
    updateRuleList(type, type + 'Rules');
    convertText();
  }
  
  event.target.closest('.rule-item').classList.remove('dragging');
}

// ãƒ«ãƒ¼ãƒ«ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°
function removeRule(type, index) {
  switch (type) {
    case 'break':
      breakRules.splice(index, 1);
      break;
    case 'replace':
      replaceRules.splice(index, 1);
      break;
    case 'delete':
      deleteRules.splice(index, 1);
      break;
    case 'rangeDelete':
      rangeDeleteRules.splice(index, 1);
      break;
  }
  updateRuleList(type, type + 'Rules');
  convertText();
  saveSettings();
}

// ãƒ«ãƒ¼ãƒ«ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
function updateRule(type, index, field, value) {
  switch (type) {
    case 'break':
      if (field === 'char') {
        breakRules[index].char = value;
      } else if (field === 'position') {
        breakRules[index].position = value;
      } else if (field === 'lines') {
        breakRules[index].lines = parseInt(value) || 0;
      }
      break;
    case 'replace':
      replaceRules[index][field] = value;
      break;
    case 'delete':
      deleteRules[index] = value;
      break;
    case 'rangeDelete':
      rangeDeleteRules[index][field] = value;
      break;
  }
  updateRuleList(type, type + 'Rules');
  convertText();
  saveSettings();
}

// ãƒ«ãƒ¼ãƒ«ã‚’ç§»å‹•ã™ã‚‹é–¢æ•°
function moveRule(type, index, direction) {
  let rules;
  switch (type) {
    case 'break':
      rules = breakRules;
      break;
    case 'replace':
      rules = replaceRules;
      break;
    case 'delete':
      rules = deleteRules;
      break;
    case 'rangeDelete':
      rules = rangeDeleteRules;
      break;
  }

  const newIndex = index + direction;
  if (newIndex >= 0 && newIndex < rules.length) {
    const temp = rules[index];
    rules[index] = rules[newIndex];
    rules[newIndex] = temp;
    updateRuleList(type, type + 'Rules');
    convertText();
  }
}

// ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›ã™ã‚‹é–¢æ•°
function convertText(skipHistory = false) {
  let text = document.getElementById('inputText').value;
  const removeSpaces = document.getElementById('removeSpaces').checked;
  const breakAtComma = document.getElementById('breakAtComma').checked;
  const breakAtPeriod = document.getElementById('breakAtPeriod').checked;
  const breakAtQuote = document.getElementById('breakAtQuote').checked;
  const removeAlphabetSpaces = document.getElementById('removeAlphabetSpaces').checked;
  const breakAtCommaLines = parseInt(document.getElementById('breakAtCommaLines').value) || 0;
  const breakAtPeriodLines = parseInt(document.getElementById('breakAtPeriodLines').value) || 0;
  const breakAtQuoteLines = parseInt(document.getElementById('breakAtQuoteLines').value) || 0;

  // ã‚¹ãƒšãƒ¼ã‚¹ã¨æ”¹è¡Œã®å‡¦ç†
  if (removeSpaces) {
    // ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã®å‡¦ç†
    if (removeAlphabetSpaces) {
      text = text.replace(/\s+/g, '');
    } else {
      // è‹±æ•°å­—ã®å‰å¾Œã®ã‚¹ãƒšãƒ¼ã‚¹ã¯ä¿æŒ
      text = text.replace(/(?<![a-zA-Z0-9])\s+|\s+(?![a-zA-Z0-9])/g, '');
    }
  }

  // ç¯„å›²å‰Šé™¤ãƒ«ãƒ¼ãƒ«ã®é©ç”¨
  rangeDeleteRules.forEach(rule => {
    const regex = new RegExp(`${escapeRegExp(rule.start)}[\\s\\S]*?${escapeRegExp(rule.end)}`, 'g');
    text = text.replace(regex, '');
  });

  // æ”¹è¡Œãƒ«ãƒ¼ãƒ«ã®é©ç”¨
  breakRules.forEach(rule => {
    const regex = new RegExp(`${escapeRegExp(rule.char)}`, 'g');
    const lineBreaks = '\n'.repeat(rule.lines + 1);
    if (rule.position === 'after') {
      text = text.replace(regex, `${rule.char}${lineBreaks}`);
    } else {
      text = text.replace(regex, `${lineBreaks}${rule.char}`);
    }
  });

  // ç½®æ›ãƒ«ãƒ¼ãƒ«ã®é©ç”¨ï¼ˆæ›´æ–°ã•ã‚ŒãŸå‡¦ç†ï¼‰
  if (replaceRules.length > 0) {
    // ãƒ«ãƒ¼ãƒ«ã‚’æ–‡å­—åˆ—ã®é•·ã•ã§ã‚½ãƒ¼ãƒˆï¼ˆé•·ã„æ–‡å­—åˆ—ã‹ã‚‰å…ˆã«å‡¦ç†ï¼‰
    const sortedReplaceRules = replaceRules.slice().sort((a, b) => b.from.length - a.from.length);
    
    // å…¨ã¦ã®ç½®æ›ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚€æ­£è¦è¡¨ç¾ã‚’ä½œæˆ
    const pattern = sortedReplaceRules.map(rule => escapeRegExp(rule.from)).join('|');
    const regex = new RegExp(pattern, 'g');

    // ä¸€åº¦ã«å…¨ã¦ã®ç½®æ›ã‚’è¡Œã†
    text = text.replace(regex, match => {
      const rule = sortedReplaceRules.find(r => r.from === match);
      return rule ? rule.to : match;
    });
  }

  // å‰Šé™¤ãƒ«ãƒ¼ãƒ«ã®é©ç”¨
  deleteRules.forEach(rule => {
    const regex = new RegExp(escapeRegExp(rule), 'g');
    text = text.replace(regex, '');
  });

  // æ”¹è¡Œå‡¦ç†
  if (breakAtComma) {
    text = text.replace(/ã€/g, `ã€${'\n'.repeat(breakAtCommaLines + 1)}`);
  }
  if (breakAtPeriod || breakAtQuote) {
    if (breakAtPeriod) {
      text = text.replace(/ã€‚(?!ã€)/g, `ã€‚${'\n'.repeat(breakAtPeriodLines + 1)}`);
    }
    if (breakAtQuote) {
      text = text.replace(/ã€(?!ã€‚)/g, `ã€${'\n'.repeat(breakAtQuoteLines + 1)}`);
    }
    // ã€Œã€‚ã€ã€ã®é€£ç¶šã¯ãã®ã¾ã¾æ®‹ã™
    text = text.replace(/ã€‚ã€/g, 'ã€‚ã€');
  }

  // ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸæ”¹è¡Œæ–‡å­—ã‚’å®Ÿéš›ã®æ”¹è¡Œã«å¤‰æ›
  text = text.replace(/\\n/g, '\n');

  document.getElementById('outputText').value = text;
  
}

// æ­£è¦è¡¨ç¾ã®ãƒ¡ã‚¿æ–‡å­—ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹é–¢æ•°
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\');
}

// ã‚¹ãƒšãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°
function removeSpacesFromText(text) {
  return text.replace(/(?<![.,a-zA-Z])\s+(?![.,a-zA-Z])/g, '');
}

// ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹é–¢æ•°
function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(() => {
    showMessage('ãƒ†ã‚­ã‚¹ãƒˆãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸ');
  }).catch(err => {
    console.error('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', err);
  });
}

// å…¨ã¦ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹é–¢æ•°
function copyAll() {
  const text = document.getElementById('outputText').value;
  copyToClipboard(text);
}

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
function showMessage(message) {
  const messageElement = document.getElementById('message');
  messageElement.textContent = message;
  setTimeout(() => {
    messageElement.textContent = '';
  }, 3000);
}

// ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢ã™ã‚‹é–¢æ•°
function clearText() {
  document.getElementById('inputText').value = '';
  document.getElementById('outputText').value = '';
  showMessage('ãƒ†ã‚­ã‚¹ãƒˆãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ');
}

// ãƒ«ãƒ¼ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹é–¢æ•°
function exportRules() {
  const rules = {
    breakRules,
    replaceRules,
    deleteRules,
    rangeDeleteRules,
    checkboxStates: {
      removeSpaces: document.getElementById('removeSpaces').checked,
      breakAtComma: document.getElementById('breakAtComma').checked,
      breakAtPeriod: document.getElementById('breakAtPeriod').checked,
      breakAtQuote: document.getElementById('breakAtQuote').checked,
      removeAlphabetSpaces: document.getElementById('removeAlphabetSpaces').checked
    },
    lineBreakSettings: {
      breakAtCommaLines: parseInt(document.getElementById('breakAtCommaLines').value) || 0,
      breakAtPeriodLines: parseInt(document.getElementById('breakAtPeriodLines').value) || 0,
      breakAtQuoteLines: parseInt(document.getElementById('breakAtQuoteLines').value) || 0
    }
  };
  const jsonString = JSON.stringify(rules, null, 2);
  const blob = new Blob([jsonString], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'text_converter_rules.json';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// ãƒ«ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹é–¢æ•°
function importRules(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      try {
        const rules = JSON.parse(e.target.result);
        breakRules = rules.breakRules || [];
        replaceRules = rules.replaceRules || [];
        deleteRules = rules.deleteRules || [];
        rangeDeleteRules = rules.rangeDeleteRules || [];
        if (rules.checkboxStates) {
          document.getElementById('removeSpaces').checked = rules.checkboxStates.removeSpaces;
          document.getElementById('breakAtComma').checked = rules.checkboxStates.breakAtComma;
          document.getElementById('breakAtPeriod').checked = rules.checkboxStates.breakAtPeriod;
          document.getElementById('breakAtQuote').checked = rules.checkboxStates.breakAtQuote;
          document.getElementById('removeAlphabetSpaces').checked = rules.checkboxStates.removeAlphabetSpaces || false;
        }
        if (rules.lineBreakSettings) {
          document.getElementById('breakAtCommaLines').value = rules.lineBreakSettings.breakAtCommaLines || 0;
          document.getElementById('breakAtPeriodLines').value = rules.lineBreakSettings.breakAtPeriodLines || 0;
          document.getElementById('breakAtQuoteLines').value = rules.lineBreakSettings.breakAtQuoteLines || 0;
        }
        updateRuleList('break', 'breakRules');
        updateRuleList('replace', 'replaceRules');
        updateRuleList('delete', 'deleteRules');
        updateRuleList('rangeDelete', 'rangeDeleteRules');
        convertText();
        showMessage('ãƒ«ãƒ¼ãƒ«ãŒæ­£å¸¸ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ');
      } catch (error) {
        console.error('ãƒ«ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ', error);
        showMessage('ãƒ«ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
      }
    };
    reader.onerror = function(error) {
      console.error('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', error);
      showMessage('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    };
    reader.readAsText(file);
  }
}

// å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¤‰æ›ã‚’è¡Œã†
document.getElementById('inputText').addEventListener('input', convertText);

// ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¤‰æ›ã‚’è¡Œã†
document.querySelectorAll('input[type="checkbox"], input[type="number"]').forEach(input => {
  input.addEventListener('change', () => {
    convertText();
    saveSettings();
  });
});

// ã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
function switchTab(tabName) {
  document.querySelectorAll('.tab-button').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
  
  document.getElementById('single-tab').style.display = tabName === 'single' ? 'block' : 'none';
  document.getElementById('batch-tab').style.display = tabName === 'batch' ? 'block' : 'none';
}

// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ã™ã‚‹é–¢æ•°
function addFileToList(file) {
  const fileDiv = document.createElement('div');
  fileDiv.className = 'file-item';
  fileDiv.innerHTML = `
    <span class="file-item-name">${file.name}</span>
    <button onclick="previewFile(this)">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
    <button onclick="this.parentElement.remove()">å‰Šé™¤</button>
  `;
  document.getElementById('fileList').appendChild(fileDiv);
}

// ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€é–¢æ•°
document.getElementById('batchFiles').addEventListener('change', function(event) {
  const files = event.target.files;
  for (let file of files) {
    addFileToList(file);
  }
});

// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹é–¢æ•°
function previewFile(button) {
  switchTab('single');
  const fileName = button.previousElementSibling.textContent;
  const fileInput = document.getElementById('batchFiles');
  const file = Array.from(fileInput.files).find(f => f.name === fileName);
  
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('inputText').value = e.target.result;
      convertText();
    };
    reader.readAsText(file);
  }
}

// å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›ã™ã‚‹é–¢æ•°
function convertAllFiles() {
  const fileInput = document.getElementById('batchFiles');
  const files = fileInput.files;
  if (files.length === 0) {
    showMessage('å¤‰æ›ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“');
    return;
  }

  let processed = 0;
  let total = files.length;
  showMessage(`å¤‰æ›ã‚’é–‹å§‹ã—ã¾ã™ (0/${total})`);

  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = function(e) {
      const text = e.target.result;
      document.getElementById('inputText').value = text;
      convertText();
      const convertedText = document.getElementById('outputText').value;
      const blob = new Blob([convertedText], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `converted_${file.name}`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      processed++;
      showMessage(`å¤‰æ›ä¸­... (${processed}/${total})`);
      if (processed === total) {
        showMessage('å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›ã—ã¾ã—ãŸ');
      }
    };
    reader.readAsText(file);
  });
}

// å…¨ã¦ã®å¤‰æ›æ¸ˆã¿ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹é–¢æ•°
function downloadAll() {
  const fileInput = document.getElementById('batchFiles');
  const files = fileInput.files;
  if (files.length === 0) {
    showMessage('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“');
    return;
  }

  let processed = 0;
  let zip = new JSZip();

  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = function(e) {
      const text = e.target.result;
      document.getElementById('inputText').value = text;
      convertText();
      const convertedText = document.getElementById('outputText').value;
      zip.file(`converted_${file.name}`, convertedText);
      
      processed++;
      if (processed === files.length) {
        zip.generateAsync({type:"blob"}).then(function(content) {
          const url = URL.createObjectURL(content);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'converted_files.zip';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        });
      }
    };
    reader.readAsText(file);
  });
}

// ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚ŒãŸã¨ãã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å®Ÿè¡Œ
document.getElementById('importFile').addEventListener('change', importRules);
</script>
</body>
</html>
